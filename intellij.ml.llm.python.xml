<idea-plugin package="com.intellij.ml.llm.python">
  <dependencies>
    <plugin id="com.intellij.modules.python"/>
  </dependencies>

  <extensions defaultExtensionNs="com.intellij.ml.llm">
    <classContextBuilder language="Python"
                         implementationClass="com.intellij.ml.llm.python.context.PythonClassContextBuilder"/>
    <errorExplainFilterFactory
      implementation="com.intellij.ml.llm.python.runtimeErrorExplanation.filters.PythonTracebackLLMExplainFilterFactory"/>
    <methodContextBuilder language="Python"
                          implementationClass="com.intellij.ml.llm.python.context.PythonMethodContextBuilder"/>
    <fileContextBuilder language="Python"
                        implementationClass="com.intellij.ml.llm.python.context.PythonFileContextBuilder"/>
    <variableContextBuilder language="Python"
                            implementationClass="com.intellij.ml.llm.python.context.PythonVariableContextBuilder"/>
    <documentationSupport language="Python" implementationClass="com.intellij.ml.llm.python.LLMPythonDocumentationSupport"/>
    <documentationSupport language="JupyterPython" implementationClass="com.intellij.ml.llm.python.LLMPythonDocumentationSupport"/>
    <nameSuggestionContextProvider language="Python"
                                   implementationClass="com.intellij.ml.llm.python.refactorings.PythonNameSuggestionContextProvider"/>
    <codeCompletionUnderCommentSupport language="Python"
                                       implementationClass="com.intellij.ml.llm.python.LLMPythonCodeCompletionUnderCommentSupport"/>
    <generateTestsChatSupport language="Python"
                                       implementationClass="com.intellij.ml.llm.python.LLMPythonGenerateTestsChatSupport"/>
  </extensions>

  <extensions defaultExtensionNs="com.intellij">
    <completion.contributor implementationClass="com.intellij.ml.llm.python.completion.LlmPythonNameCompletionContributor"
                            language="Python"/>

    <projectTechnologiesChatContextProvider implementation="com.intellij.ml.llm.python.context.PyBaseChatContextProvider"/>
    <codeContextProvider implementation="com.intellij.ml.llm.python.context.PyCodeContextProvider"/>

    <!--suppress PluginXmlExtensionRegistration -->
    <ml.llm.aiAssistantIntention>
      <className>com.intellij.ml.llm.python.intentions.inline.PythonAddTypeAnnotationsIntention</className>
      <bundleName>messages.LLMBundle</bundleName>
      <categoryKey>intention.category.large.language.model</categoryKey>
    </ml.llm.aiAssistantIntention>

  </extensions>
</idea-plugin>